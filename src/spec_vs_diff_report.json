{
  "kind": "spec_vs_diff_report",
  "version": "1.0",
  "generatedAt": "2026-02-05T21:25:42.869Z",
  "summary": "Diff adds new backend state types for reference library entries, case documents (via ExternalBlob), and draft motions plus a migration initializer. Frontend adds pages/routes for Reference Library, per-submission Documents, Draft Motions list, and a Draft Motion wizard, along with an auth gate component. However, several requested admin/template and CRUD capabilities are not evidenced in the diff, and the Draft Motion flow appears hardcoded rather than template-driven.",
  "missing_requirements": [
    {
      "id": "REQ-10",
      "requirement": "Admin-only backend methods to add, update, list, and delete reference library entries (title + body text + optional tags/source fields), and corresponding admin UI to create/edit/delete entries.",
      "reason": "The admin UI page shown only demonstrates adding entries (useAddReferenceEntry) and listing/searching entries; no evidence of update/delete operations or optional tags/source fields in the data model (model uses author, not tags/source). Backend method implementations are not shown in the truncated backend/main.mo diff.",
      "evidence": [
        "frontend/src/pages/AdminReferenceLibraryPage.tsx",
        "backend/main.mo"
      ]
    },
    {
      "id": "REQ-11",
      "requirement": "Backend supports admin-managed motion templates (template name + template body with placeholders + required field definitions). Frontend Draft Motion wizard must let user pick a template and generate text from that template (optionally including selected reference entries), then save draft to backend.",
      "reason": "DraftMotionWizardPage generates content from a single hardcoded string template and collects fixed fields; there is no evidence of template selection, template retrieval, or admin-managed template CRUD in backend or frontend.",
      "evidence": [
        "frontend/src/pages/DraftMotionWizardPage.tsx",
        "backend/main.mo"
      ]
    },
    {
      "id": "REQ-12",
      "requirement": "Frontend UI to manage submission documents must include listing, viewing/opening a document, and deleting a document (with communicated type/size limits).",
      "reason": "The diff shows upload handling and communicates size/type limits, and it fetches a documents list, but the provided truncated content does not show any UI/actions for viewing/opening or deleting documents.",
      "evidence": [
        "frontend/src/pages/SubmissionDocumentsPage.tsx"
      ]
    }
  ],
  "hallucinated_features": [],
  "confidence": 0.62,
  "changed_files": [
    "backend/main.mo",
    "backend/migration.mo",
    "frontend-file-summaries.txt",
    "frontend/src/App.tsx",
    "frontend/src/components/auth/RequireAuth.tsx",
    "frontend/src/components/layout/SiteHeader.tsx",
    "frontend/src/hooks/useQueries.ts",
    "frontend/src/pages/AdminReferenceLibraryPage.tsx",
    "frontend/src/pages/CaseSubmissionConfirmationPage.tsx",
    "frontend/src/pages/DraftMotionWizardPage.tsx",
    "frontend/src/pages/DraftMotionsPage.tsx",
    "frontend/src/pages/PaymentStatusPage.tsx",
    "frontend/src/pages/ReferenceLibraryPage.tsx",
    "frontend/src/pages/SubmissionDocumentsPage.tsx",
    "project_state.json"
  ]
}